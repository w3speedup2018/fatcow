{% if template contains "index" or template contains "collection" or template contains "product" %}
	
{% else %}
	<style>.product-item{overflow:visible}.product-item__image-figure{border-radius:var(--border-radius-cards) var(--border-radius-cards) 0 0;transition:opacity .3s linear,visibility .3s linear!important}.product-item__image .lazy-image:before,.product-item__image .lazy-image:after{border-radius:var(--border-radius-cards) 0 0}.product-item__image--no-text .product-item__image-figure{border-radius:var(--border-radius-cards)}.product-item__image-figure--secondary,.no-touchevents .product-item__image--has-secondary:hover .product-item__image-figure--primary{opacity:0;visibility:hidden}.no-touchevents .product-item__image--has-secondary:hover .product-item__image-figure--secondary{opacity:1;visibility:visible}div+.equalize-white-space{margin-top:-.1875rem}.product-item__price span{width:auto}.product-item__price span:not(:first-child){padding-inline-start:.5rem}.product-item__price span:empty{display:none}.product-item__price .product-price--unit{display:block;padding-inline-start:0!important;opacity:.76;font-size:80%;margin-top:-.125rem;margin-bottom:.125rem}.product-item__text{display:flex;flex-direction:column;justify-content:stretch}.product-item__text.text-align--center{align-items:center}.product-item__text.text-align--right{align-items:flex-end}.product-item__text:empty{display:none}.product-item__quick-buy{width:100%}.product-item__quick-buy .add-to-cart-preloader svg circle{stroke:var(--color-text-cards)}.product-item__title+.product-item__quick-buy{margin-top:.5rem}.product-item__title:last-child{margin-bottom:.5rem}.product-item__text+.product-item__quick-buy{margin-top:.25rem}.product-item__local-availability .alert{background:transparent;border:none;padding:0;margin:0}.product-item__local-availability .alert:before{width:.625rem;height:.625rem;margin-inline-end:.3125rem;top:.0625rem}.product-item__local-availability .alert.alert--note:before{border-color:var(--color-text-cards)}.product-item__badges{position:absolute;top:var(--gutter-small);pointer-events:none}html[dir=rtl] .product-item__badges{left:var(--gutter-small)}html[dir=ltr] .product-item__badges{right:var(--gutter-small)}.product-text .product-item__badges{position:static;display:flex;gap:.75rem}.product-item__badge{clear:both;float:right;margin-bottom:calc(var(--gutter-small) / 2);width:auto;padding-inline-start:.4375rem;padding-inline-end:.4375rem;height:1.5rem;border-radius:clamp(0px,var(--border-radius-buttons),3px);background-color:#bbb;line-height:1.5rem;text-transform:uppercase}.product-text .product-item__badge{margin-bottom:0;float:none;height:1.75rem;line-height:1.75rem;padding-inline-start:.5625rem;padding-inline-end:.5625rem}.product-item__icons{display:flex;flex-wrap:wrap;gap:.625rem 0}.star-rating{font-size:0;width:100%;height:1rem;display:grid;grid-template-columns:max-content auto;align-items:center;gap:.625rem}.star-rating__stars{background-repeat:repeat-x;font-size:0;display:inline-block;text-align:start}.star-rating__stars-active{display:inline-block;font-size:0;height:.875rem;background-repeat:repeat-x}.main-content--align-product-items .product-item{display:flex;flex-direction:column}.main-content--align-product-items .product-item__text:first-of-type{flex-grow:1}@media screen and (max-width: 474px){.facets__summary{font-size:calc(14px / 16 * var(--base-body-size) + 0px)}}@media screen and (min-width: 475px) and (max-width: 1023px){.facets__summary{font-size:calc(15px / 16 * var(--base-body-size) + 0px)}}@media screen and (min-width: 1024px){.facets__summary{font-size:calc(16px / 16 * var(--base-body-size) + 0px)}}.facets{display:block;margin-inline-start:var(--horizontal-padding);-webkit-margin-start:var(--horizontal-padding);margin-inline-end:var(--horizontal-padding)}.facets__form{display:flex;justify-content:space-between}.facets__prewrapper{max-width:75%}.facets__heading{margin-bottom:0}.facets__disclosure{width:auto;display:inline-block;position:relative;margin-top:.75rem;margin-inline-end:.75rem;-wekbit-margin-end:toRe(12)}.facets__summary{background-color:var(--color-background-main);border:var(--border-width-forms) solid var(--color-borders-forms-primary);border-radius:var(--border-radius-forms);color:var(--color-text-main);resize:none;vertical-align:middle;-webkit-appearance:none;outline:none!important;transition:all .1s linear;background-repeat:no-repeat;background-position:calc(100% - 1.5rem) center;background-size:.8125rem .5rem;padding:var(--input-padding);width:100%;cursor:pointer;text-align:start;transition:border .1s linear}html[dir=rtl] .facets__summary{background-position:1.25rem center}html[dir=rtl] .facets__summary{padding-left:3.3125rem;padding-right:1rem}html[dir=ltr] .facets__summary{padding-right:3.3125rem;padding-left:1rem}.no-touchevents .facets__summary:hover,.facets__summary:focus,.facets__summary.content-opened{border-color:var(--color-borders-forms-secondary)}.facets__summary:focus-visible{box-shadow:0 0 0 .1875rem var(--color-secondary-background-main)}.facets__display{position:absolute;background:var(--color-background-main);border:var(--border-width-forms) solid var(--color-borders-forms-primary);border-radius:var(--border-radius-forms);top:calc(100% + .625rem);width:21.875rem;width:max-content;min-width:18.75rem;max-height:31.25rem;overflow-y:auto;box-shadow:.3125rem .3125rem .625rem #00000012}html[dir=rtl] .facets__display{right:0}html[dir=ltr] .facets__display{left:0}.facets__header{padding:.75rem 1rem;border-bottom:1px solid var(--color-borders-forms-primary);display:flex;justify-content:space-between}.facets__header a{display:inline-block;text-decoration:underline}.facets__list{list-style:none;padding:.875rem 1rem;margin:0}.facets__item{padding:.3125rem 0}.facets__item label{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:.875rem;width:100%;cursor:pointer}.facets__item label.facet-checkbox--disabled{opacity:.24;pointer-events:none}.facets__item input[type=checkbox]{cursor:pointer}.facets__price{padding:1.25rem 1rem;display:flex;justify-content:space-between;align-items:center}.facets__price .field{border:var(--border-width-forms) solid var(--color-borders-forms-primary);border-radius:var(--border-radius-forms);position:relative}.facets__price .field__currency{position:absolute;opacity:.36;top:50%;transform:translateY(-50%);left:.75rem;padding-top:.125rem}.facets__price .field__label{text-transform:lowercase}.facets__price input{width:6.25rem;height:2rem;padding-inline-start:2.5rem;-webkit-padding-start:2.5rem;border:none;text-align:end}.collection-filters__item select{width:fit-content}.collection-filters__label{margin-bottom:.75rem;display:block}.disclosure-has-popup:focus{outline:none!important}.disclosure-has-popup:focus{border-color:var(--color-borders-forms-secondary);box-shadow:0 0 0 3px var(--color-borders-forms-primary);outline:none!important}.disclosure-has-popup summary:focus{outline:none!important}.disclosure-has-popup[open]>summary:before{position:fixed;top:0;right:0;bottom:0;z-index:2;display:block;cursor:default;content:" ";background:0 0}html[dir=rtl] .disclosure-has-popup[open]>summary:before{right:0}html[dir=ltr] .disclosure-has-popup[open]>summary:before{left:0}.disclosure-has-popup[open]>summary+*{z-index:100}.active-facets{margin:.5rem 0 1.125rem;display:flex;gap:.625rem;flex-wrap:wrap}.active-facets__button{position:relative}.active-facets__button--light{padding-inline-end:2.5rem}.active-facets__button svg{top:50%;width:1.875rem;height:1.875rem;transform:translateY(-50%);position:absolute;pointer-events:none}html[dir=rtl] .active-facets__button svg{left:.5rem}html[dir=ltr] .active-facets__button svg{right:.5rem}.active-facets__button svg *{transition:all .1s linear;fill:var(--color-text-main)}.no-touchevents .active-facets__button:hover svg *{fill:var(--color-foreground-accent-main);stroke:none}.active-facets:empty{display:none}.facets__form--mobile{display:block}.facets__form--mobile .facets__prewrapper{max-width:100%;padding:var(--sidebar-gutter)}.facets__form--mobile .facets__disclosure{width:100%}.facets__form--mobile .facets__summary{width:100%;padding-inline-start:0!important;-webkit-padding-start:0!important;padding-inline-end:1.875rem;border-radius:0;border:0;border-bottom:1px solid var(--color-borders-main)!important;background-position:100% center}.facets__form--mobile .facets__disclosure{margin-bottom:0}.facets__form--mobile .facets__display{position:relative;border:0;top:0;width:100%;max-height:auto;box-shadow:none}html[dir=rtl] .facets__form--mobile .facets__display{right:0}html[dir=ltr] .facets__form--mobile .facets__display{left:0}.facets__form--mobile .facets__header{display:none}.facets__form--mobile .facets__heading,.facets__form--mobile .collection-filters__label{display:block;margin-top:1.125rem;line-height:1;font-weight:var(--font-weight-body-bold)}.facets__form--mobile .facets__list{margin-top:.75rem;padding:0}.facets__form--mobile .facets__price{padding:.75rem 0 .5rem}.facets__form--mobile .active-facets{margin-top:1.125rem}.facets__form--mobile .collection-filters__item{padding:0 var(--sidebar-gutter)}.facets__form--mobile .collection-filters__item select{width:100%}.collection-product-count{opacity:.66;margin-bottom:1.75rem}.collection.loading{opacity:.36;pointer-events:none}@media screen and (max-width: 767px){.section-heading--facets .section-heading__text{order:2}.section-heading--facets .section-heading__actions{order:1;margin-top:0;margin-bottom:.875rem}}</style>
{% endif %}
<link data-href="{{ 'component-product-item.css' | asset_url }}" rel="stylesheet">

{%- if section.settings.enable_filtering or section.settings.enable_sorting -%}
<link data-href="{{ 'component-facets.css' | asset_url }}" rel="stylesheet">
  <div class="container--large" data-js-inert>
    {%- render 'facets', results: collection, enable_filtering: section.settings.enable_filtering, enable_sorting: section.settings.enable_sorting, type: 'desktop' -%}
  </div>
{%- endif -%}

<div id="CollectionProductGrid" data-js-inert>
  
  {%- paginate collection.products by section.settings.products_number -%}
    
    <div class="container--large">

      <div id="main-collection-product-grid" data-id="{{ section.id }}" class="collection grid grid--layout 
        {% unless collection.products.size == 0 %} {{ section.settings.layout }} {% endunless %}
      ">

        {%- for product in collection.products -%}
          {%- liquid
              if forloop.index < 3
                assign preload = true
              else 
                assign preload = false
              endif
              render 'product-item', product: product, product_collection: collection, section_blocks: section.blocks, index: forloop.index, layout: section.settings.layout, preload: preload
          -%}
        {%- else -%}
          {%- if collection.filters != empty -%}
            {%- liquid
              assign sort_by = collection.sort_by | default: collection.default_sort_by
              assign terms = collection.terms | escape
              if collection.current_vendor
                assign terms = collection.current_vendor | escape
              endif
              assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
            -%}
              <p class="no-content-message rte">
                {{ 'collections.empty' | t }}<br/>
                {{ 'collections.use_fewer_filters_html' | t: link: results_url, class: 'button--text' }}
              </p>
          {%- else %}
            <p class="no-content-message">
              {{ 'products.grid.no_products_text' | t }}
            </p>
          {%- endif -%}
        {%- endfor -%}

      </div>

      {%- liquid
        if paginate.pages > 1
          render 'pagination', paginate: paginate
        endif
      -%}

    </div>

  {%- endpaginate -%}

</div>

{%- if section.settings.enable_filtering or section.settings.enable_sorting -%}
  <sidebar-drawer id="site-filters-sidebar" class="sidebar sidebar--right" tabindex="-1" role="dialog" aria-modal="true" style="display:none">
    <div class="sidebar__header">
      <span class="sidebar__title h5">
        {{ 'collections.filter_and_sort' | t }}
      </span>
      <button class="sidebar__close" data-js-close>
        <span class="visually-hidden">{{ 'general.accessibility_labels.close_sidebar' | t }}</span>
        <span aria-hidden="true" aria-role="img">{%- render 'theme-symbols', icon: 'close' -%}</span>
      </button>
    </div>
    <div class="sidebar__body">
      {%- render 'facets', results: collection, enable_filtering: section.settings.enable_filtering, enable_sorting: section.settings.enable_sorting, type: 'mobile' -%}
    </div>
  </sidebar-drawer>
  <script src="{{ 'component-facets.js' | asset_url }}" defer></script>
{%- endif -%}

{% schema %}
  {
    "name": "t:sections.main-collection-product-grid.name",
    "class": "container--vertical-space container--remove-margin-before inert-inside",
    "blocks": [
      {
        "type": "price",
        "name": "t:sections.local-extra-words.sections.product-card.blocks.price",
        "limit": 1
      },
      {
        "type": "title",
        "name": "t:sections.local-extra-words.sections.product-card.blocks.title",
        "limit": 1
      },
      {
        "type": "quick_buy",
        "name": "t:sections.local-extra-words.sections.product-card.blocks.quick_buy",
        "limit": 1
      },
      {
        "type": "vendor",
        "name": "t:sections.local-extra-words.sections.product-card.blocks.vendor",
        "limit": 1
      },
      {
        "type": "rating",
        "name": "t:sections.local-extra-words.sections.product-card.blocks.rating",
        "limit": 1
      },
      {
        "type": "local_availability",
        "name": "t:sections.local-extra-words.settings_schema.product-card.local-pickup.name",
        "limit": 1,
        "settings": [
          {
            "type": "paragraph",
            "content": "t:sections.local-extra-words.settings_schema.product-card.local-pickup.info"
          }
        ]
      },
      {
        "type": "icons",
        "name": "t:sections.local-extra-words.sections.main-product.blocks.icons.name",
        "limit": 1,
        "settings": [
          {
            "type": "paragraph",
            "content": "t:sections.local-extra-words.sections.main-product.blocks.icons.help"
          }
        ]
      },
      {
        "type": "text",
        "name": "t:sections.local-extra-words.sections.product-card.blocks.text.name",
        "settings": [
          {
            "type": "text",
            "id": "metafield",
            "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.text.label",
            "info": "t:sections.local-extra-words.sections.product-card.blocks.text.info",
            "info": "custom.product_text"
          },
          {
            "type": "select",
            "id": "text_size",
            "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.label",
            "options": [
              {
                "value": "text-size--xsmall",
                "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__1"
              },
              {
                "value": "text-size--regular",
                "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__2"
              },
              {
                "value": "text-size--large",
                "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.size.option__3"
              }
            ],
            "default": "text-size--regular"
          },
          {
            "type": "color",
            "id": "text_color",
            "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.color.label",
            "default": "#6A6A6A"
          },
          {
            "type": "checkbox",
            "id": "text_transform",
            "label": "t:sections.local-extra-words.sections.product-card.blocks.text.settings.transform.label",
            "default": false
          }
        ]
      }
    ],
    "settings": [
      {
        "type": "select",
        "id": "layout",
        "label": "t:sections.local-extra-words.sections.columns.name",
        "info": "t:sections.local-extra-words.sections.columns.info",
        "options": [
          {
            "value": "grid-3 grid-lap-2 grid-tiny-1",
            "label": "t:sections.local-extra-words.sections.columns.option__2"
          },
          {
            "value": "grid-4 grid-portable-3 grid-lap-2 grid-tiny-1",
            "label": "t:sections.local-extra-words.sections.columns.option__3"
          }
        ],
        "default": "grid-4 grid-portable-3 grid-lap-2 grid-tiny-1"
      },
      {
        "type": "range",
        "id": "products_number",
        "label": "t:sections.main-collection-product-grid.settings.products_per_page.label",
        "min": 12,
        "max": 64,
        "step": 4,
        "default": 24
      },
      {
        "type": "header",
        "content": "t:sections.main-collection-product-grid.settings.header__1.content"
      },
      {
        "id": "enable_filtering",
        "type": "checkbox",
        "label": "t:sections.main-collection-product-grid.settings.enable_filtering.label",
        "default": true,
        "info": "t:sections.main-collection-product-grid.settings.enable_filtering.info"
      },
      {
        "id": "enable_sorting",
        "type": "checkbox",
        "label": "t:sections.main-collection-product-grid.settings.enable_sorting.label",
        "default": true
      }
    ]
  }
{% endschema %}